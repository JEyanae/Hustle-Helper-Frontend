"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1307],{27226:(e,s,t)=>{let a;t.d(s,{FH:()=>c,id:()=>m,qQ:()=>o});var r=t(26572),n=t(81431),l=t(17127),i=t(2349),d=t(54162);let o=new r.E({defaultOptions:{queries:{refetchInterval:!1,refetchOnMount:!1,refetchOnWindowFocus:!1,experimental_prefetchInRender:!0}}}),c=(0,n.XT)({links:[(0,n.$H)(),(a="".concat("https://api.rork-direct.workers.dev","/trpc"),(0,n.Lb)({url:a,transformer:i.Ay,headers(){let e={},s=d.VD.getState().token;return s&&(e.Authorization="Bearer ".concat(s)),e},methodOverride:"POST"}))]}),m=(0,l.pY)()},41548:(e,s,t)=>{t.d(s,{Cf:()=>x,Es:()=>f,HM:()=>m,L3:()=>h,c7:()=>p,lG:()=>d,rr:()=>g,zM:()=>o});var a=t(91430),r=t(46373),n=t(30296),l=t(41958),i=t(45907);let d=r.bL,o=r.l9,c=r.ZL,m=r.bm,u=l.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});u.displayName=r.hJ.displayName;let x=l.forwardRef((e,s)=>{let{className:t,children:l,...d}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(r.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[l,!d.disableClose&&(0,a.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.MKb,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=r.UC.displayName;let p=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};p.displayName="DialogHeader";let f=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};f.displayName="DialogFooter";let h=l.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});h.displayName=r.hE.displayName;let g=l.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...n})});g.displayName=r.VY.displayName},45907:(e,s,t)=>{t.d(s,{cn:()=>n});var a=t(40628),r=t(90593);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},54162:(e,s,t)=>{t.d(s,{UU:()=>l,VD:()=>i,_r:()=>d});var a=t(38167),r=t(71011),n=t(89694);function l(){return(0,a.createBrowserClient)("https://pzrwgnsberfgclyxahnc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB6cndnbnNiZXJmZ2NseXhhaG5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg2MjUyMTksImV4cCI6MjA1NDIwMTIxOX0.lKjCkJ7zKRthd_mWFJWcY4Vo7WRvbE4xnl9gGzGFa14")}let i=(0,r.v)(e=>{let s=l();return s.auth.onAuthStateChange((s,t)=>{var a,r,l;let i=null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null;e({user:i,token:null!==(r=null==t?void 0:t.access_token)&&void 0!==r?r:null,isLoading:!1}),i?((0,n.do)(i.id),(0,n.Fi)({email:i.email,provider:null===(l=i.app_metadata)||void 0===l?void 0:l.provider,created_at:i.created_at})):(0,n.do)(void 0)}),{user:null,token:null,supabase:s,isLoading:!0}});function d(){let{supabase:e,user:s,isLoading:t}=i();return{supabase:e,user:s,isLoading:t}}},68591:(e,s,t)=>{t.d(s,{a:()=>r});var a=t(41958);function r(){let[e,s]=a.useState(void 0);return a.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(887,"px)")),t=()=>{s(window.innerWidth<888)};return e.addEventListener("change",t),s(window.innerWidth<888),()=>e.removeEventListener("change",t)},[]),!!e}},70596:(e,s,t)=>{t.d(s,{$:()=>c,r:()=>o});var a=t(91430),r=t(16317),n=t(19414),l=t(6030),i=t(41958),d=t(45907);let o=(0,n.F)("relative inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-black/10 bg-transparent hover:bg-white/20 hover:text-accent-foreground",secondary:"bg-secondary/70 text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",cool:"bg-secondary text-secondary-foreground hover:bg-secondary/80 flex flex-row px-4 border rounded-lg bg-accent/20 hover:text-accent-foreground"},size:{default:"h-10 px-4 py-2",xxs:"h-5 px-2 py-1",xs:"h-7 rounded-md px-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10","icon-xs":"h-7 w-7","icon-sm":"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,s)=>{let{className:t,variant:n,size:i,asChild:c=!1,children:m,loading:u,loadingText:x,childrenClassName:p,...f}=e,h=c?r.DX:"button";return(0,a.jsxs)(h,{className:(0,d.cn)(o({variant:n,size:i,className:t})),ref:s,...f,children:[u&&(0,a.jsxs)("div",{className:"absolute flex h-full w-full items-center justify-center",children:[(0,a.jsx)(l.A,{className:"h-4 w-4 animate-spin "}),x&&(0,a.jsx)("span",{className:"ml-2",children:x})]}),(0,a.jsx)("div",{className:(0,d.cn)("flex w-full flex-row items-center justify-center gap-2",u&&"opacity-0","icon"===i&&"gap-1",p),children:m})]})});c.displayName="Button"},81307:(e,s,t)=>{t.d(s,{pg:()=>F,Iw:()=>k});var a=t(91430),r=t(4983),n=t(41958),l=t(71011),i=t(76912),d=t(70596),o=t(41548),c=t(30296),m=t(31942),u=t(45907);let x=m.bL;m.YJ;let p=m.WT,f=n.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsx)(m.l9,{ref:s,className:(0,u.cn)(!n.asChild&&"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:n.asChild?r:(0,a.jsxs)(a.Fragment,{children:[r,(0,a.jsx)(m.In,{asChild:!0,children:(0,a.jsx)(c.TBE,{className:"h-4 w-4 opacity-50"})})]})})});f.displayName=m.l9.displayName;let h=n.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(m.PP,{ref:s,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(c.Mtm,{})})});h.displayName=m.PP.displayName;let g=n.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(m.wn,{ref:s,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(c.D3D,{})})});g.displayName=m.wn.displayName;let j=n.forwardRef((e,s)=>{let{className:t,children:r,position:n="popper",...l}=e;return(0,a.jsx)(m.ZL,{children:(0,a.jsxs)(m.UC,{ref:s,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...l,children:[(0,a.jsx)(h,{}),(0,a.jsx)(m.LM,{className:(0,u.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(g,{})]})})});j.displayName=m.UC.displayName,n.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(m.JU,{ref:s,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",t),...r})}).displayName=m.JU.displayName;let v=n.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(m.q7,{ref:s,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(m.VF,{children:(0,a.jsx)(c.Srz,{className:"h-4 w-4"})})}),(0,a.jsx)(m.p4,{children:r})]})});v.displayName=m.q7.displayName,n.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(m.wv,{ref:s,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=m.wv.displayName;var b=t(68591),y=t(85091),N=t(87726),w=t(89694),C=t(27226),_=t(54162);let k=(0,l.v)((0,i.kg)({isVisible:!1,customTitle:void 0},e=>({open:(s,t)=>{let a=window.location.href;(0,w.sx)("Opened Paywall",{url:a,type:"default",place:s}),e({isVisible:!0,customTitle:t})},onChange:s=>{e({isVisible:s,customTitle:void 0})}})));function I(e){let{plan:s,mini:t=!1}=e,{name:n,highlighted:l=!1,stripe_price_id:i,stripe_product_id:o}=s,{user:c}=(0,_._r)(),m=(0,r.useRouter)(),{projectId:u}=(0,r.useParams)(),{data:x}=(0,N.x)(),p=C.id.billing.createCheckoutSession.useMutation(),f=async()=>{if(!c){m.push("/auth");return}try{var e;let s=null!==(e=window.tolt_referral)&&void 0!==e?e:void 0,{url:t}=await p.mutateAsync({planId:o,referral:s,projectId:null!=u?u:void 0});t&&(window.location.href=t)}catch(e){console.error("Failed to create checkout session:",e)}},h=(null==x?void 0:x.subscription_price_id)===i;return t?(0,a.jsx)(d.$,{size:"sm",variant:"default",onClick:f,loading:p.isPending,disabled:h&&(null==x?void 0:x.is_subscribed),children:h&&(null==x?void 0:x.is_subscribed)?"Current":"Upgrade"}):h&&(null==x?void 0:x.is_subscribed)?(0,a.jsx)(d.$,{disabled:!0,className:"w-full",variant:"outline",children:"Current Plan"}):(0,a.jsxs)(d.$,{className:"w-full",variant:l?"secondary":"default",onClick:f,loading:p.isPending,children:["Upgrade to ",n]})}function z(e){let{price:s}=e;return(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsxs)("span",{className:"font-bold text-3xl",children:["$",s]}),(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"/ mo"})]})}function R(e){let{plans:s}=e,[t,r]=(0,n.useState)(s[0]);return(0,y.T)(s.map(e=>e.name).join(","),(e,a)=>{let n=s.at(0);(null==n?void 0:n.stripe_price_id)!==(null==t?void 0:t.stripe_price_id)&&r(n)}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,u.cn)("md:hidden flex items-center justify-between px-4 py-3 border-b"),children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"font-medium"})}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsxs)("span",{className:"font-bold",children:["$",t.price]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"/ mo"})]}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[t.monthly_energy.toLocaleString()," msgs/mo"]})]}),(0,a.jsx)(I,{plan:t,mini:!0})]}),(0,a.jsxs)("div",{className:(0,u.cn)("hidden md:block rounded-lg border p-6 space-y-4",t.highlighted&&"bg-primary text-primary-foreground"),children:[(0,a.jsx)("h3",{className:"font-semibold",children:t.name}),(0,a.jsx)(z,{price:t.price}),(0,a.jsxs)(x,{onValueChange:e=>r(s.find(s=>s.name===e)),children:[(0,a.jsx)(f,{children:(0,a.jsx)(p,{placeholder:"Choose your message limit"})}),(0,a.jsx)(j,{children:s.map(e=>(0,a.jsx)(v,{value:e.name,children:e.name},e.name))})]}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("li",{children:[t.monthly_energy.toLocaleString()," messages monthly"]}),(0,a.jsx)("li",{children:"Code export"}),(0,a.jsx)("li",{children:"Private projects"}),(0,a.jsx)("li",{children:"Chat support"}),(0,a.jsx)("li",{children:t.description})]}),(0,a.jsx)(I,{plan:t})]})]})}function L(e){let{plan:s,isLast:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,u.cn)("md:hidden flex items-center justify-between px-4 py-3 border-b",s.highlighted&&"bg-primary/10",t&&"border-b-0"),children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium",children:s.name}),s.highlighted&&(0,a.jsx)("span",{className:"text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded-full",children:"Popular"})]}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsxs)("span",{className:"font-bold",children:["$",s.price]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"/ mo"})]}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[s.monthly_energy.toLocaleString()," msgs/mo"]})]}),(0,a.jsx)(I,{plan:s,mini:!0})]}),(0,a.jsxs)("div",{className:(0,u.cn)("hidden md:flex rounded-lg border p-6 flex-col space-y-4 justify-between",s.highlighted&&"bg-primary text-primary-foreground"),children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-4 mb-8",children:[(0,a.jsx)("h3",{className:"font-semibold",children:s.name}),(0,a.jsx)(z,{price:s.price}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm mt-auto",children:[(0,a.jsxs)("li",{children:[s.monthly_energy.toLocaleString()," messages monthly"]}),(0,a.jsx)("li",{children:"Code export"}),(0,a.jsx)("li",{children:"Private projects"}),"Junior"===s.name&&(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"mailto:team@rork.com",className:"underline",children:"Email support"})}),"Free"!==s.name&&"Junior"!==s.name&&(0,a.jsx)("li",{children:"Chat support"}),(0,a.jsx)("li",{children:s.description})]})]}),(0,a.jsx)(I,{plan:s})]})]})}function F(){var e,s;let{isVisible:t,onChange:r}=k(),{data:l}=C.id.billing.plans.useQuery(),{data:i}=(0,N.x)(),d=(null==i?void 0:i.is_subscribed)?null==i?void 0:i.subscription_price_id:null,c=(0,n.useMemo)(()=>null==l?void 0:l.find(e=>e.stripe_price_id===d&&!e.purchasable),[l,d]),m=(0,n.useMemo)(()=>null==l?void 0:l.filter(e=>e.purchasable).sort((e,s)=>e.price-s.price),[l]),u=(0,b.a)(),x=u?4:c?2:3,p=null==m?void 0:m.slice(0,x),f=null==m?void 0:m.slice(null!==(e=null==p?void 0:p.length)&&void 0!==e?e:0);return console.log({nonScalePlans:p,scalePlans:f}),(0,a.jsx)(o.lG,{open:t,onOpenChange:r,children:(0,a.jsxs)(o.Cf,{className:"max-w-[calc(100%-2rem)] p-0 md:p-4 rounded-xl md:max-w-6xl ",children:[(0,a.jsx)(o.L3,{className:"sr-only",children:"Pricing Plans"}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col py-8 space-y-8 justify-center items-center",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:null!==(s=k.getState().customTitle)&&void 0!==s?s:"Simple, transparent pricing"}),(0,a.jsx)("p",{className:"text-xl text-muted-foreground",children:"Choose the plan that's right for you"})]}),(0,a.jsxs)("div",{className:"grid md:gap-6 lg:grid-cols-4 w-full",children:[(0,a.jsx)("div",{className:"md:hidden flex items-center justify-between px-4 py-3 border-b",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"font-medium",children:"Free"})}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)("span",{className:"font-bold",children:"$0"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"/ mo"})]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"5 msgs/day, 35 msgs/mo"})]})}),c&&(0,a.jsx)(L,{plan:c,isLast:!0},c.name),null==p?void 0:p.sort((e,s)=>e.price-s.price).map((e,s,t)=>(0,a.jsx)(L,{plan:e,isLast:s===t.length-1},e.name)),!u&&!!(null==f?void 0:f.length)&&(0,a.jsx)(R,{plans:f})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Messages reset each month on 1st of the month."}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Need a custom plan?"," ",(0,a.jsx)("a",{href:"mailto:team@rork.com",className:"underline",children:"Contact us"})]})]})]})]})})}},85091:(e,s,t)=>{t.d(s,{S:()=>l,T:()=>n});var a=t(41958);let r=Symbol("FirstRun");function n(e,s,t){let{skipFirst:n=!1,enabled:l=!0}=t||{},[i,d]=(0,a.useState)(r),o=(0,a.useRef)(s);return o.current=s,(0,a.useEffect)(()=>{l&&i!==e&&(n&&i===r||o.current(i===r?void 0:i,e),d(e))},[e,o,n,l,i]),i===e}function l(e,s){let t=(0,a.useRef)(null);(0,a.useEffect)(()=>{let a=t.current;(!a||s.some((e,s)=>!Object.is(e,a[s])))&&e(),t.current=s},s)}},87726:(e,s,t)=>{t.d(s,{x:()=>n});var a=t(27226),r=t(54162);function n(){let{user:e}=(0,r._r)();return a.id.user.profile.useQuery(void 0,{enabled:!!(null==e?void 0:e.id),refetchInterval:3e4})}},89694:(e,s,t)=>{t.d(s,{Bu:()=>n,Fi:()=>o,do:()=>d,oe:()=>l,sx:()=>i});var a=t(7315),r=t(34261);let n=()=>{a.Ts("9d409966ba6b69b18462681bd207e303",{autocapture:!0,serverUrl:"/ampl"})},l=(e,s)=>{a.u4("Viewed Page: ".concat(e),{url:window.location.href,...s})},i=(e,s)=>{a.u4(e,s)},d=e=>{a.do(e)},o=e=>{let s=new r.T;Object.entries(e).forEach(e=>{let[t,a]=e;s.set(t,a)}),a.ls(s)}}}]);
